"use strict"; (self.webpackChunkactivejdocs = self.webpackChunkactivejdocs || []).push([[998], { 6302: (e, t, r) => { r.r(t), r.d(t, { assets: () => d, contentTitle: () => c, default: () => u, frontMatter: () => s, metadata: () => l, toc: () => h }); var n = r(5893), a = r(1151), o = r(7618), i = r(7815); const s = { title: "ActiveJ | To-Do list app using React", sidebar_label: "ActiveJ + React (Advanced)", keywords: ["java", "java for beginners", "java framework", "guide", "tutorial", "web application", "server", "servlet", "spring", "spring alternative", "netty alternative", "jetty alternative", "async", "todo app", "todo list", "react", "reactjs", "react js"], description: "Integrate React.js in your Java web application. In the tutorial you will create a To-Do app using ActiveJ Java platform and React.js." }, c = "To-Do list app using React", l = { id: "tutorials/todo-list-tutorial", title: "ActiveJ | To-Do list app using React", description: "Integrate React.js in your Java web application. In the tutorial you will create a To-Do app using ActiveJ Java platform and React.js.", source: "@site/docs/tutorials/todo-list-tutorial.mdx", sourceDirName: "tutorials", slug: "/tutorials/todo-list-tutorial", permalink: "/tutorials/todo-list-tutorial", draft: !1, unlisted: !1, tags: [], version: "current", frontMatter: { title: "ActiveJ | To-Do list app using React", sidebar_label: "ActiveJ + React (Advanced)", keywords: ["java", "java for beginners", "java framework", "guide", "tutorial", "web application", "server", "servlet", "spring", "spring alternative", "netty alternative", "jetty alternative", "async", "todo app", "todo list", "react", "reactjs", "react js"], description: "Integrate React.js in your Java web application. In the tutorial you will create a To-Do app using ActiveJ Java platform and React.js." }, sidebar: "tutorials", previous: { title: "ActiveJ + React", permalink: "/tutorials/using-react" }, next: { title: "ActiveJ + Svelte", permalink: "/tutorials/using-svelte" } }, d = {}, h = [{ value: "Creating Launcher", id: "creating-launcher", level: 2 }, { value: "Running the application", id: "running-the-application", level: 2 }]; function p(e) { const t = { a: "a", code: "code", em: "em", h1: "h1", h2: "h2", li: "li", p: "p", pre: "pre", strong: "strong", ul: "ul", ...(0, a.a)(), ...e.components }; return (0, n.jsxs)(n.Fragment, { children: [(0, n.jsx)(t.h1, { id: "to-do-list-app-using-react", children: "To-Do list app using React" }), "\n", (0, n.jsxs)(t.p, { children: ["In this tutorial we will create a To-Do List app using ActiveJ and React. We will explore how to integrate React in an ActiveJ project and how to simply manage routing using the HTTP module. You can find full example sources on ", (0, n.jsx)(o.Z, { text: "GitHub", url: "/examples/tutorials/react-integration-2" })] }), "\n", (0, n.jsxs)(t.p, { children: ["Here we will consider only the main app class - ", (0, n.jsx)(t.a, { href: "#creating-launcher", children: (0, n.jsx)(t.code, { children: "ApplicationLauncher" }) }), ". It uses ActiveJ ", (0, n.jsx)(o.Z, { url: "/launchers/http/src/main/java/io/activej/launchers/http/HttpServerLauncher.java", children: (0, n.jsx)(t.code, { children: "HttpServerLauncher" }) }), " and ", (0, n.jsx)(o.Z, { url: "/core-http/src/main/java/io/activej/http/AsyncServlet.java", children: (0, n.jsx)(t.code, { children: "AsyncServlet" }) }), " classes for setting up an embedded application server. With this approach, you can create servers with no XML configurations or third-party dependencies. Moreover, ", (0, n.jsx)(t.code, { children: "HttpServerLauncher" }), " will automatically take care of launching, running and stopping the application. You'll only need to provide launcher with servlets."] }), "\n", (0, n.jsx)(t.h2, { id: "creating-launcher", children: "Creating Launcher" }), "\n", (0, n.jsxs)(t.p, { children: [(0, n.jsx)(t.code, { children: "ApplicationLauncher" }), " is the main class of the program. Besides launching the application, it also handles routing and most of the corresponding logic. We will use ActiveJ ", (0, n.jsx)(t.code, { children: "HttpServerLauncher" }), " and extend it:"] }), "\n", (0, n.jsx)(t.pre, { children: (0, n.jsx)(t.code, { className: "language-java", metastring: "url=/examples/tutorials/react-integration-2/src/main/java/ApplicationLauncher.java tag=REGION_1", children: "public final class ApplicationLauncher extends HttpServerLauncher {\n  @Provides\n  RecordDAO recordRepo() {\n    return new RecordImplDAO();\n  }\n\n  @Provides\n  Executor executor() {\n    return newSingleThreadExecutor();\n  }\n" }) }), "\n", (0, n.jsxs)(t.p, { children: ["First, we provided ", (0, n.jsx)(t.code, { children: "RecordDAO" }), " with the application business logic and ", (0, n.jsx)(t.code, { children: "Executor" }), " which is needed for our ", (0, n.jsx)(t.code, { children: "AsyncServlet" }), ".\nIn order to transform objects to/from JSON we chose ", (0, n.jsx)(t.a, { href: "https://github.com/ngs-doo/dsl-json", children: "DSL-JSON library" }), ",\nso we provide a ", (0, n.jsx)(t.code, { children: "DslJson<?>" }), " object that will handle data marshalling.\n", (0, n.jsx)(t.code, { children: "AsyncServlet" }), " loads static content from ", (0, n.jsx)(t.code, { children: "/build" }), " directory and takes care of the routing:"] }), "\n", (0, n.jsx)(t.pre, { children: (0, n.jsx)(t.code, { className: "language-java", metastring: "url=/examples/tutorials/react-integration-2/src/main/java/ApplicationLauncher.java tag=REGION_2", children: '@Provides\nIStaticLoader staticLoader(Reactor reactor, Executor executor) {\n  return IStaticLoader.ofClassPath(reactor, executor, "build/");\n}\n\n@Provides\nJsonCodec<Record> recordJsonCodec() {\n  return JsonCodecs.ofObject(Record::new,\n    "title", Record::getTitle, JsonCodecs.ofString(),\n    "plans", Record::getPlans, JsonCodecs.ofList(\n      JsonCodecs.ofObject(Plan::new,\n        "text", Plan::getText, JsonCodecs.ofString(),\n        "isComplete", Plan::isComplete, JsonCodecs.ofBoolean())\n    ));\n}\n\n@Provides\nAsyncServlet servlet(Reactor reactor, IStaticLoader staticLoader, RecordDAO recordDAO, JsonCodec<Record> recordJsonCodec) {\n  JsonCodec<Map<Integer, Record>> mapJsonCodec = JsonCodecs.ofMap(JsonKeyCodec.ofNumberKey(Integer.class), recordJsonCodec);\n  return RoutingServlet.builder(reactor)\n    .with("/*", StaticServlet.builder(reactor, staticLoader)\n      .withIndexHtml()\n      .build())\n' }) }), "\n", (0, n.jsxs)(t.p, { children: ["Routing in ActiveJ HTTP module resembles Express approach. Method ", (0, n.jsx)(t.em, { children: "with(@Nullable HttpMethod method, String path, AsyncServlet servlet)" }), " of ", (0, n.jsx)(t.code, { children: "RoutingServlet" }), "'s builder\nadds routes to the ", (0, n.jsx)(t.code, { children: "RoutingServlet" }), ":"] }), "\n", (0, n.jsxs)(t.ul, { children: ["\n", (0, n.jsxs)(t.li, { children: [(0, n.jsx)(t.code, { children: "method" }), " (optional) is one of the HTTP methods (", (0, n.jsx)(t.code, { children: "GET" }), ", ", (0, n.jsx)(t.code, { children: "POST" }), ", etc.)"] }), "\n", (0, n.jsxs)(t.li, { children: [(0, n.jsx)(t.code, { children: "path" }), " is the path on the server"] }), "\n", (0, n.jsxs)(t.li, { children: [(0, n.jsx)(t.code, { children: "servlet" }), " defines the logic of request processing. If you need to get some data from the ", (0, n.jsx)(t.code, { children: "request" }), " while processing you can use:", "\n", (0, n.jsxs)(t.ul, { children: ["\n", (0, n.jsxs)(t.li, { children: [(0, n.jsx)(t.code, { children: "request.getPathParameter(String key)" }), "/", (0, n.jsx)(t.code, { children: "request.getQueryParameter(String key)" }), " (see example of ", (0, n.jsx)(t.a, { href: "/http/examples#request-parameters-example", children: (0, n.jsx)(t.code, { children: "query parameter usage" }) }), "\nto provide the key of the needed parameter and receive back a corresponding String"] }), "\n", (0, n.jsxs)(t.li, { children: [(0, n.jsx)(t.code, { children: "request.getPostParameters()" }), " to get a Map of all request parameters"] }), "\n"] }), "\n"] }), "\n"] }), "\n", (0, n.jsxs)(t.p, { children: ["Pay attention to the ", (0, n.jsx)(t.code, { children: "*" }), " in the provided request. It states that whichever path until the next ", (0, n.jsx)(t.code, { children: "/" }), " is received, it\nwill be processed by our static servlet, which uploads static content from ", (0, n.jsx)(t.code, { children: "/build" }), " directory."] }), "\n", (0, n.jsx)(t.p, { children: "Servlet should be able to add a new record, get all available records, delete record by its id and\nalso mark plans of particular record as completed or not, so we provide corresponding routing:" }), "\n", (0, n.jsx)(t.pre, { children: (0, n.jsx)(t.code, { className: "language-java", metastring: "url=/examples/tutorials/react-integration-2/src/main/java/ApplicationLauncher.java tag=REGION_3", children: '.with(POST, "/add", request -> request.loadBody()\n  .then($ -> {\n    ByteBuf body = request.getBody();\n    try {\n      byte[] bodyBytes = body.getArray();\n      Record record = JsonUtils.fromJsonBytes(recordJsonCodec, bodyBytes);\n      recordDAO.add(record);\n      return HttpResponse.ok200().toPromise();\n    } catch (MalformedDataException e) {\n      return HttpResponse.ofCode(400).toPromise();\n    }\n  }))\n.with(GET, "/get/all", request -> {\n  Map<Integer, Record> records = recordDAO.findAll();\n  return HttpResponse.ok200()\n    .withJson(JsonUtils.toJson(mapJsonCodec, records))\n    .toPromise();\n})\n//[START REGION_4]\n.with(GET, "/delete/:recordId", request -> {\n  int id = parseInt(request.getPathParameter("recordId"));\n  recordDAO.delete(id);\n  return HttpResponse.ok200().toPromise();\n})\n//[END REGION_4]\n.with(GET, "/toggle/:recordId/:planId", request -> {\n  int id = parseInt(request.getPathParameter("recordId"));\n  int planId = parseInt(request.getPathParameter("planId"));\n\n  Record record = recordDAO.find(id);\n  Plan plan = record.getPlans().get(planId);\n  plan.toggle();\n  return HttpResponse.ok200().toPromise();\n})\n.build();\n' }) }), "\n", (0, n.jsxs)(t.p, { children: ["Pay attention to the requests with ", (0, n.jsx)(t.code, { children: ":" }), ", for example:"] }), "\n", (0, n.jsx)(t.pre, { children: (0, n.jsx)(t.code, { className: "language-java", metastring: "url=/examples/tutorials/react-integration-2/src/main/java/ApplicationLauncher.java tag=REGION_4", children: '.with(GET, "/delete/:recordId", request -> {\n  int id = parseInt(request.getPathParameter("recordId"));\n  recordDAO.delete(id);\n  return HttpResponse.ok200().toPromise();\n})\n' }) }), "\n", (0, n.jsxs)(t.p, { children: [(0, n.jsx)(t.code, { children: ":" }), " states that the following characters until the next ", (0, n.jsx)(t.code, { children: "/" }), " is a variable whose keyword, in this case, is ", (0, n.jsx)(t.code, { children: "recordId" }), "."] }), "\n", (0, n.jsx)(t.h2, { id: "running-the-application", children: "Running the application" }), "\n", (0, n.jsxs)(t.p, { children: ["To run the example ", (0, n.jsx)(t.a, { href: "https://github.com/hoangtien2k3/reactify-core/tree/v6.0-beta2", children: "clone ActiveJ" }), " and import it\nas a Maven project. Check out branch ", (0, n.jsx)(t.strong, { children: (0, n.jsx)(i.Z, { name: "currentVersion" }) }), ". Before running the example, build the project (", (0, n.jsx)(t.strong, { children: "Ctrl + F9" }), " for IntelliJ IDEA)."] }), "\n", (0, n.jsxs)(t.p, { children: ["Then, run the following command in ", (0, n.jsx)(t.code, { children: "activej/examples/tutorials/react-integration-2/front" }), " directory in terminal:"] }), "\n", (0, n.jsx)(t.pre, { children: (0, n.jsx)(t.code, { className: "language-bash", children: "npm i\nnpm run-script build\n" }) }), "\n", (0, n.jsxs)(t.p, { children: ["Open ", (0, n.jsx)(t.code, { children: "ApplicationLauncher" }), " and run its ", (0, n.jsx)(t.code, { children: "main" }), " method. Then open your favourite browser and go to ", (0, n.jsx)(t.a, { href: "http://localhost:8080", children: "localhost:8080" }), ". Try to add and delete some tasks or mark them as completed"] })] }) } function u(e = {}) { const { wrapper: t } = { ...(0, a.a)(), ...e.components }; return t ? (0, n.jsx)(t, { ...e, children: (0, n.jsx)(p, { ...e }) }) : p(e) } }, 7618: (e, t, r) => { r.d(t, { Z: () => o }); r(7294); var n = r(9962), a = r(5893); const o = e => { let { url: t, text: r, isInline: o = !0, children: i } = e; const { siteConfig: s } = (0, n.Z)(), c = t.startsWith("/examples") ? s.customFields.githubExamplesBranch : s.customFields.githubBranch; return (0, a.jsx)("a", { style: o ? {} : { display: "block", marginBottom: "16px" }, href: s.customFields.githubUrl + "/" + c + t, target: "_blank", children: r || i }) } }, 7815: (e, t, r) => { r.d(t, { Z: () => a }); r(7294); var n = r(9962); const a = e => { let { name: t } = e; const { siteConfig: r } = (0, n.Z)(); if (!t) throw new Error("Variable name is required"); if (void 0 === r.customFields[t]) throw new Error(`Variable ${t} not exist`); return r.customFields[t] } }, 1151: (e, t, r) => { r.d(t, { Z: () => s, a: () => i }); var n = r(7294); const a = {}, o = n.createContext(a); function i(e) { const t = n.useContext(o); return n.useMemo((function () { return "function" == typeof e ? e(t) : { ...t, ...e } }), [t, e]) } function s(e) { let t; return t = e.disableParentContext ? "function" == typeof e.components ? e.components(a) : e.components || a : i(e.components), n.createElement(o.Provider, { value: t }, e.children) } } }]);